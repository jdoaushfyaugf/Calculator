<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
            position: relative;
        }

        .calculator {
            width: 300px;
            background: #7284c0;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #display {
            width: 100%;
            height: 60px;
            text-align: left;
            font-size: 1.8em;
            padding: 10px;
            border: none;
            background: #eee;
            border-radius: 5px;
            margin-bottom: 10px;
            overflow-x: auto;
            white-space: nowrap;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
        }

        button {
            width: 100%;
            height: 50px;
            font-size: 1.2em;
            border: none;
            cursor: pointer;
            background: #ddd;
            border-radius: 5px;
        }

        button:hover {
            background: #bbb;
        }

        .equal {
            background: #f39c12;
            color: white;
        }

        .equal:hover {
            background: #e67e22;
        }

        .scientific-buttons {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .scientific-buttons button {
            background: #4CAF50;
            color: white;
        }

        .scientific-buttons button:hover {
            background: #45a049;
        }

        .credits {
            margin-top: 15px;
            font-size: 0.9em;
            color: #555;
        }

        .game-popup, .equation-popup {
            width: 100%;
            height: 100%;
            background-color: white;
            padding: 20px;
            border: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100;
            overflow: hidden;
        }

        .game-container {
            margin: 20px auto;
            text-align: center;
        }

        .game-popup button, .equation-popup button {
            background-color: #f39c12;
            color: white;
            padding: 8px 15px;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px;
        }

        .game-popup button:hover, .equation-popup button:hover {
            background-color: #e67e22;
        }

        /* Buttons on the side (desktop version) */
        .side-buttons {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .side-buttons button {
            width: 150px;
            height: 50px;
            font-size: 1.2em;
            background-color: #f39c12;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .side-buttons button:hover {
            background-color: #e67e22;
        }

        /* Mobile Version - Using media queries */
        @media (max-width: 600px) {
            /* Move buttons to bottom */
            .side-buttons {
                position: fixed;
                bottom: 20px;
                right: 50%;
                transform: translateX(50%);
                flex-direction: row;
                justify-content: space-between;
                width: 80%;
                gap: 10px;
            }

            .side-buttons button {
                width: 45%;
                font-size: 1em;
                padding: 10px;
            }

            /* Adjust the calculator layout */
            .calculator {
                width: 90%;
                padding: 10px;
                margin-bottom: 20px;
            }

            .buttons button {
                font-size: 1em;
                height: 45px;
            }

            /* Ensure that game popups do not occupy full height on small screens */
            .game-popup, .equation-popup {
                top: 20px;
                bottom: 20px;
                padding: 10px;
            }

            .game-popup button, .equation-popup button {
                font-size: 1em;
                padding: 6px 12px;
            }
        }

    </style>
</head>
<body>
    <div class="calculator">
        <input type="text" id="display" disabled>
        <div class="buttons">
            <button onclick="clearDisplay()">C</button>
            <button onclick="deleteLast()">âŒ«</button>
            <button onclick="appendOperator('%')">%</button>
            <button onclick="appendOperator('/')">/</button>
            <button onclick="appendValue('7')">7</button>
            <button onclick="appendValue('8')">8</button>
            <button onclick="appendValue('9')">9</button>
            <button onclick="appendOperator('*')">*</button>
            <button onclick="appendValue('4')">4</button>
            <button onclick="appendValue('5')">5</button>
            <button onclick="appendValue('6')">6</button>
            <button onclick="appendOperator('-')">-</button>
            <button onclick="appendValue('1')">1</button>
            <button onclick="appendValue('2')">2</button>
            <button onclick="appendValue('3')">3</button>
            <button onclick="appendOperator('+')">+</button>
            <button onclick="toggleScientific()">Sci</button>
            <button onclick="appendValue('0')">0</button>
            <button onclick="appendValue('.')">.</button>
            <button onclick="calculateResult()" class="equal">=</button>
        </div>

        <div class="credits"><b>Made by: justme_same_as_always on discord.</b></div>
    </div>

    <div class="side-buttons">
        <button onclick="openGame()">Play Guess the Number Game</button>
        <button onclick="openEquationGame()">Play Solve the Equation Game</button>
    </div>

    <!-- Guess the Number Game Popup -->
    <div id="gamePopup" class="game-popup">
        <div class="game-container">
            <h2>Guess the Number Game - Level <span id="level">1</span></h2>
            <p>Guess the number between 1 and <span id="maxNumber">100</span></p>
            <input type="number" id="userGuess" placeholder="Enter your guess">
            <button onclick="checkGuess()">Submit Guess</button>
            <p id="gameMessage"></p>
            <button onclick="closeGame()">Close Game</button>
        </div>
    </div>

    <!-- Solve the Equation Game Popup -->
    <div id="equationPopup" class="equation-popup">
        <div class="game-container">
            <h2>Solve the Equation - Level <span id="equationLevel">1</span></h2>
            <p id="equationQuestion"></p>
            <input type="number" id="userAnswer" placeholder="Enter your answer">
            <button onclick="checkEquationAnswer()">Submit Answer</button>
            <p id="equationMessage"></p>
            <button onclick="closeEquationGame()">Close Game</button>
        </div>
    </div>

    <script>
        let display = document.getElementById("display");
        let expression = [];

function appendValue(value) {
    console.log(`Adding value: ${value}`);
    expression.push(value);
    updateDisplay();
}


        function appendOperator(operator) {
            if (expression.length > 0) {
                let lastElement = expression[expression.length - 1];
                if (!isNaN(lastElement) || lastElement === ')') {
                    expression.push(operator);
                }
            }
            updateDisplay();
        }

        function updateDisplay() {
            display.value = expression.join(' ');
            display.scrollLeft = display.scrollWidth;
        }

        function clearDisplay() {
            expression = [];
            updateDisplay();
        }

        function deleteLast() {
            expression.pop();
            updateDisplay();
        }

function calculateResult() {
    try {
        let postfixExpression = expression.join(' ').replace(/\s+/g, ''); // Remove extra spaces
        display.value = eval(postfixExpression); 
        expression = [display.value]; // Reset expression after calculation
    } catch {
        display.value = "Error";
        expression = [];
    }
}


        function toggleScientific() {
            let sciButtons = document.getElementById("scientific");
            sciButtons.style.display = sciButtons.style.display === "grid" ? "none" : "grid";
        }

        // Guess the Number Game
        let currentLevel = 1;
        let maxLevel = 100;
        let randomNumber;
        let attempts = 0;

        function openGame() {
            document.getElementById('gamePopup').style.display = 'block';
            generateRandomNumber();
        }

        function closeGame() {
            document.getElementById('gamePopup').style.display = 'none';
            currentLevel = 1;
            attempts = 0;
        }

        function generateRandomNumber() {
            randomNumber = Math.floor(Math.random() * (currentLevel * 10)) + 1;
            document.getElementById('maxNumber').textContent = currentLevel * 10;
            document.getElementById('level').textContent = currentLevel;
            document.getElementById('gameMessage').textContent = '';
        }

        function checkGuess() {
            let userGuess = parseInt(document.getElementById('userGuess').value);
            if (userGuess === randomNumber) {
                attempts++;
                if (currentLevel < maxLevel) {
                    currentLevel++;
                    generateRandomNumber();
                } else {
                    document.getElementById('gameMessage').textContent = Congrats! You've completed all ${maxLevel} levels!;
                }
            } else {
                attempts++;
                document.getElementById('gameMessage').textContent = Wrong guess! Try again.;
            }
        }

        // Solve the Equation Game
        let equationLevel = 1;
        let maxEquationLevel = 50;
        let currentEquation;

        function openEquationGame() {
            document.getElementById('equationPopup').style.display = 'block';
            generateEquation();
        }

        function closeEquationGame() {
            document.getElementById('equationPopup').style.display = 'none';
            equationLevel = 1;
        }

        function generateEquation() {
            let num1 = Math.floor(Math.random() * (equationLevel * 10)) + 1;
            let num2 = Math.floor(Math.random() * (equationLevel * 10)) + 1;
            let operators = ['+', '-', '*', '/'];
            let operator = operators[Math.floor(Math.random() * operators.length)];
            currentEquation = ${num1} ${operator} ${num2};
            document.getElementById('equationQuestion').textContent = currentEquation;
            document.getElementById('equationLevel').textContent = equationLevel;
            document.getElementById('equationMessage').textContent = '';
        }

        function checkEquationAnswer() {
            let userAnswer = parseFloat(document.getElementById('userAnswer').value);
            let correctAnswer = eval(currentEquation);
            if (userAnswer === correctAnswer) {
                if (equationLevel < maxEquationLevel) {
                    equationLevel++;
                    generateEquation();
                } else {
                    document.getElementById('equationMessage').textContent = Congrats! You've solved all ${maxEquationLevel} levels!;
                }
            } else {
                document.getElementById('equationMessage').textContent = document.getElementById('equationMessage').textContent = `Wrong answer! Try again.`;
            }
        }
    </script>
</body>
</html>
